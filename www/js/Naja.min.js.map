{"version":3,"file":"Naja.min.js","sources":["../src/utils.ts","../src/core/UIHandler.ts","../src/core/FormsHandler.ts","../src/core/RedirectHandler.ts","../src/core/SnippetHandler.ts","../src/core/HistoryHandler.ts","../src/core/SnippetCache.ts","../src/core/ScriptLoader.ts","../src/Naja.ts","../src/index.ts","../src/extensions/AbortExtension.ts","../src/extensions/UniqueExtension.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null],"names":["onDomReady","callback","document","readyState","addEventListener","AssertionError","Error","assert","condition","description","undefined","UIHandler","EventTarget","constructor","naja","super","this","selector","allowedOrigins","window","location","origin","handler","handleUI","bind","initialize","bindUI","body","snippetHandler","event","snippet","detail","element","selectors","join","bindElement","removeEventListener","elements","querySelectorAll","i","length","item","matches","bindForm","form","forms","mouseEvent","altKey","ctrlKey","shiftKey","metaKey","button","currentTarget","options","ignoreErrors","type","submitForm","catch","clickElement","async","data","method","url","dispatchEvent","CustomEvent","cancelable","originalEvent","preventDefault","tagName","HTMLAnchorElement","href","HTMLInputElement","HTMLButtonElement","getAttribute","toUpperCase","pathname","search","FormData","name","append","value","coords","getBoundingClientRect","prefix","Math","max","floor","pageX","left","pageY","top","isUrlAllowed","makeRequest","urlObject","URL","includes","FormsHandler","uiHandler","processForm","initForms","netteForms","Nette","initForm","inputElement","validateForm","stopImmediatePropagation","RedirectHandler","hasAttribute","forceRedirect","payload","redirect","makeRedirect","locationAdapter","assign","force","isHardRedirect","setHardRedirect","SnippetHandler","op","replace","content","innerHTML","prepend","insertAdjacentHTML","snippets","updateSnippets","static","predicate","result","id","fromCache","Object","keys","forEach","getElementById","updateSnippet","operation","changeOperation","toLowerCase","title","HistoryHandler","initialized","popStateHandler","handlePopState","saveUrl","replaceInitialState","pushNewState","configureMode","historyAdapter","replaceState","state","history","pushState","uiCache","console","warn","defaultOptions","snippetCache","source","prepareOptions","normalizeMode","buildState","mode","postGet","SnippetCache","storages","off","OffCacheStorage","HistoryCacheStorage","session","SessionCacheStorage","configureCache","historyHandler","buildHistoryState","restoreHistoryState","resolveStorage","option","storageType","historyUiCache","findSnippets","storage","key","store","fetch","scriptLoader","loadScripts","random","toString","substring","sessionStorage","setItem","JSON","stringify","getItem","parse","ScriptLoader","loadedScripts","Set","script","scriptId","add","test","el","createElement","scripts","has","scriptEl","hasAttributes","attrs","attributes","j","attrName","setAttribute","head","appendChild","parentNode","removeChild","Naja","redirectHandler","formsHandler","VERSION","extensions","registerExtension","extension","push","headers","Headers","transformData","abortController","AbortController","request","Request","credentials","signal","set","promise","response","ok","HttpError","json","error","appendToQueryString","searchParams","Array","isArray","getPrototypeOf","prototype","subkey","subvalue","entries","String","isGet","transformedData","URLSearchParams","message","status","statusText","stack","abortable","checkAbortable","onInitialize","saveAbortController","clearAbortController","abort","abortControllers","Map","checkUniqueness","abortPreviousRequest","clearRequest","unique","get","aborted","delete"],"mappings":"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"}